const express=require("express"),router=express.Router(),Book=require("../models/book"),redis=require("redis"),redisClient=redis.createClient();router.get("/",async(e,r)=>{let s;try{s=await Book.find().sort({createdAt:"desc"}).limit(10).exec()}catch{s=[]}redisClient.setEx("book_list",3600,JSON.stringify(s)),console.log("redis updated"),r.render("index",{books:s})}),module.exports=router;